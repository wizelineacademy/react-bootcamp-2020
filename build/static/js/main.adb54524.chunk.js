(this["webpackJsonpreact-certification-2020"]=this["webpackJsonpreact-certification-2020"]||[]).push([[0],{45:function(e,t,r){},86:function(e,t,r){},88:function(e,t,r){},89:function(e,t,r){"use strict";r.r(t);var c=r(1),n=r.n(c),a=r(34),s=r.n(a),i=r(7),o=r(3),l=r(2),d=r(35),u=r(38),j=r(5);function b(e,t){switch(t.type){case"@fetching":return Object(j.a)(Object(j.a)({},e),{},{status:"fetching"});case"@get/videos":return Object(j.a)(Object(j.a)({},e),{},{status:"fetched",videos:t.payload});case"@set/current_video":return Object(j.a)(Object(j.a)({},e),{},{status:"current_video",currentVideo:t.payload});case"@set/search_result":return Object(j.a)(Object(j.a)({},e),{},{status:"search",searchQuery:t.payload});case"@error":return Object(j.a)(Object(j.a)({},e),{},{status:"error",error:t.payload});case"@set/favourites_videos":return Object(j.a)(Object(j.a)({},e),{},{status:"add_favourites",favouriteVideos:[].concat(Object(u.a)(e.favouriteVideos),[t.payload])});case"@set/remove_favourites_videos":return Object(j.a)(Object(j.a)({},e),{},{status:"remove_favourites_videos",favouriteVideos:t.payload});default:return e}}var h=r(0),x={videos:[],currentVideo:null,searchQuery:"Wizeline",favouriteVideos:[]},m=Object(c.createContext)(null);function g(){var e=Object(c.useContext)(m);if(!e)throw new Error('Can\'t use "useVideoContext" without an VideosProvider!');return e}var p=function(e){var t=e.children,r=Object(c.useReducer)(b,x),n=Object(o.a)(r,2),a=n[0],s=n[1],i=Object(c.useCallback)((function(e){s({type:"@get/videos",payload:e})}),[s]),l={state:a,dispatch:s,setVideos:i};return Object(h.jsx)(m.Provider,{value:l,children:t})},O={isActive:!1,user:null},f=Object(c.createContext)(O);var v=function(e){var t=e.children,r=Object(c.useState)((function(){return window.sessionStorage.getItem("jwt")})),n=Object(o.a)(r,2),a=n[0],s=n[1];return Object(h.jsx)(f.Provider,{value:{jwt:a,setJWT:s},children:t})},w="wa_cert_authenticated",y=function(e){try{var t=window.localStorage.getItem(e);return JSON.parse(t)}catch(r){return console.error('Error parsing storage item "'.concat(e,'".')),null}},N=function(e,t){window.localStorage.setItem(e,JSON.stringify(t))},k=n.a.createContext(null);var S=function(e){var t=e.children,r=Object(c.useState)(!1),n=Object(o.a)(r,2),a=n[0],s=n[1];Object(c.useEffect)((function(){var e=y(w),t=Boolean(e);s(t)}),[]);var i=Object(c.useCallback)((function(){s(!0),N(w,!0)}),[]),l=Object(c.useCallback)((function(){s(!1),N(w,!1)}),[]);return Object(h.jsx)(k.Provider,{value:{login:i,logout:l,authenticated:a},children:t})},C=function(e){var t=e.iconName,r=e.className;return Object(h.jsx)("svg",{className:r,children:Object(h.jsx)("use",{xlinkHref:"./sprite.svg#icon-".concat(t)})})},_=function(e){var t=Object(c.useState)(e),r=Object(o.a)(t,2),n=r[0],a=r[1],s="light"===n?"dark":"light";return Object(c.useEffect)((function(){var e=window.document.documentElement;e.classList.remove(s),e.classList.add(n)}),[n,s]),[s,a]},V=(r(45),function(e){var t=e.mode,r=_(t),c=Object(o.a)(r,2),n=c[0],a=c[1],s="light"===n?"Dark Mode":"Light Mode";return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"hidden md:block",children:Object(h.jsxs)("label",{htmlFor:"toggle",className:"flex items-center cursor-pointer",children:[Object(h.jsxs)("div",{className:"relative",children:[Object(h.jsx)("input",{id:"toggle",type:"checkbox",className:"hidden",onClick:function(){return a(n)}}),Object(h.jsx)("div",{className:"toggle__line w-8 h-4 bg-gray-400 rounded-full shadow-inner"}),Object(h.jsx)("div",{className:"toggle__dot absolute w-4 h-4 bg-white rounded-full shadow inset-y-0 left-0"})]}),Object(h.jsx)("div",{className:"ml-3 text-white text-normal",children:s})]})})})}),L=r(11),I=r.n(L),D=r(14),E=function(e){var t=e.placeholder,r=g().dispatch,n=Object(l.g)(),a=Object(c.useState)({term:"Wizeline"}),s=Object(o.a)(a,2),i=s[0],d=s[1],u=function(){var e=Object(D.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r({type:"@set/search_result",payload:i.term}),r({type:"@get/videos",payload:[]}),r({type:"@set/current_video",payload:null}),n.push("/");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"relative",children:Object(h.jsxs)("form",{onSubmit:u,children:[Object(h.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-0.5",children:Object(h.jsx)("button",{type:"submit",className:"p-0 bg-blue-200 dark:bg-blue-100",children:Object(h.jsx)(C,{iconName:"search",className:"fill-current text-white w-6 h-6 pt-1"})})}),Object(h.jsx)("input",{type:"text",onChange:function(e){d({term:e.target.value.trim()})},placeholder:t,className:"focus:outline-none pl-8 rounded-lg shadow-lg p-0.5 bg-blue-200 dark:bg-blue-100 text-white"})]})})})},F=function(){return Object(h.jsx)(i.b,{to:"/login",children:Object(h.jsx)(C,{iconName:"user",className:"fill-current dark:border-gray-800 dark:text-gray-800 text-gray-400 h-10 w-10 rounded-full border-2 border-gray-400"})})},P=function(e){var t=e.placeholder,r=e.mode,c=e.toggleDrawer;return Object(h.jsxs)("nav",{className:"flex items-center flex-wrap bg-blue-900 shadow-lg dark:bg-blue-800",children:[Object(h.jsx)("button",{onClick:function(){return c()},type:"button",className:"focus:outline-none flex-initial text-center px-4 m-2 bg-transparent",children:Object(h.jsx)(C,{iconName:"menu",className:"fill-current text-white h-6 w-6 mr-2"})}),Object(h.jsx)("div",{className:"flex-1 text-left sm:px-2 md:px-4 md:m-2",children:Object(h.jsx)(E,{placeholder:t})}),Object(h.jsx)("div",{className:"flex-initial text-right px-4 m-2",children:Object(h.jsx)(V,{mode:r})}),Object(h.jsx)("div",{className:"flex-initial text-right px-4 m-2 hidden md:block",children:Object(h.jsx)(F,{})})]})},R=r(13),J=function(e){var t=e.id,r=e.title,c=e.description,n=e.thumbnail,a=e.video,s=g().dispatch,o=Object(l.i)().path;return Object(h.jsx)("div",{className:"my-1 px-1 w-full md:w-1/3 lg:my-4 lg:px-4 lg:w-1/4 xl:w-1/5 2xl:w-1/6 cursor-pointer sm:px-4 sm:my-4",children:Object(h.jsx)(i.b,{to:"".concat(o,"video/").concat(encodeURI(t)),onClick:function(){s({type:"@set/current_video",payload:a})},children:Object(h.jsxs)("article",{className:"overflow-hidden w-full h-full rounded-lg shadow-lg text-justify dark:border-gray-600 dark:bg-gray-600",children:[Object(h.jsx)("img",{className:"block h-auto w-full",src:n,alt:r}),Object(h.jsx)("header",{className:"flex items-center justify-between leading-tight pl-4 pr-4 pt-2",children:Object(h.jsx)("h1",{className:"text-base",children:r})}),Object(h.jsx)("section",{className:"p-4",children:Object(h.jsx)("p",{className:"text-xs font-hairline dark:text-gray-300 text-gray-500",children:c})})]})})})},z=function(e){var t=e.id,r=e.title,c=e.thumbnail,n=e.video,a=e.onSelectedVideo;return Object(h.jsx)("div",{className:"col-start-7 col-end-8 cursor-pointer mt-0.5 focus:outline-none",onClick:function(){return a(n)},role:"button",tabIndex:"0","aria-hidden":"true",children:Object(h.jsxs)("article",{className:"grid sm:grid-cols-1 md:grid-cols-4 dark:bg-gray-600",children:[Object(h.jsx)("div",{className:"md:w-full md:h-auto sm:w-full rounded-t lg:rounded-t-none lg:rounded-l dark:border-0 dark:border-transparent text-center overflow-hidden bg-local border-t border-b lg:border-gray-400",children:Object(h.jsx)("img",{className:"block h-full w-full flex-none bg-cover text-center overflow-hidden",src:c,alt:Object(R.a)(r)})}),Object(h.jsx)("div",{className:"h-auto hidden sm:block col-start-2 col-span-5 w-full dark:border-0 border-r border-b border-l dark:border-transparent dark:bg-gray-600 border-gray-400 lg:border-l-0 lg:border-t lg:border-gray-400 bg-white rounded-b lg:rounded-b-none lg:p-2 md:p-.5 flex-col justify-between leading-normal",children:Object(h.jsx)("div",{className:"mb-2",children:Object(h.jsx)("div",{className:"text-gray-500 lg:text-xs xl:text-base dark:text-white",children:Object(R.a)(r)})})})]})},t)},A=function(e){var t=e.relatedCard,r=e.onSelectedVideo,c=e.videos;return Object(h.jsx)(h.Fragment,{children:t?Object(h.jsx)("div",{className:"col-start-6 col-end-8",children:c.map((function(e){return Object(h.jsx)(z,{id:e.etag,title:Object(R.a)(e.snippet.title),thumbnail:e.snippet.thumbnails.default.url,video:e,onSelectedVideo:r},e.etag)}))}):Object(h.jsx)("div",{className:"container my-12 mx-auto px-4 md:px-12",children:Object(h.jsx)("div",{className:"flex flex-wrap -mx-1 lg:-mx-4",children:c.map((function(e){return Object(h.jsx)(J,{id:e.id.videoId,title:Object(R.a)(e.snippet.title),description:Object(R.a)(e.snippet.description),thumbnail:e.snippet.thumbnails.medium.url,video:e,onSelectedVideo:r},e.etag)}))})})})},W=r(37),B=r.n(W).a.create({baseURL:"https://www.googleapis.com/youtube/v3",params:{part:"snippet",type:"video",maxResults:25,key:"".concat("AIzaSyD3Dz0lvohCfndSnLW5DAPd42w-a4ON39A")}}),Q=function(e){var t=Object(c.useRef)({}),r=Object(c.useState)(!1),n=Object(o.a)(r,2),a=n[0],s=n[1],i=Object(c.useState)(null),l=Object(o.a)(i,2),d=l[0],u=l[1],j=g(),b=j.state,h=j.setVideos,x=Object(c.useCallback)(Object(D.a)(I.a.mark((function r(){var c,n;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s(!0),!t.current[e]){r.next=5;break}h(t.current[e]),r.next=17;break;case 5:return r.prev=5,r.next=8,B.get("/search",{params:{q:e}});case 8:c=r.sent,n=c.data,t.current[e]=n.items,h(n.items),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(5),u(r.t0);case 17:s(!1);case 18:case"end":return r.stop()}}),r,null,[[5,14]])}))),[h,e]);return Object(c.useEffect)((function(){x()}),[x]),[b,a,d]};var U=function(e){var t=e.toggleDrawer,r=e.isOpen,n=Object(c.useRef)(null),a=g(),s=a.state,i=a.dispatch,o=Q(s.searchQuery),l=o.loading,d=o.error,u=s.videos;return console.log(l,d),u.lenght<=0?Object(h.jsx)("div",{children:"Loading..."}):Object(h.jsxs)("section",{ref:n,children:[Object(h.jsx)(P,{toggleDrawer:t,isOpen:r,placeholder:"Search...",mode:"light"}),Object(h.jsx)("section",{children:Object(h.jsx)(A,{onSelectedVideo:function(e){i({type:"@set/current_video",payload:e})},videos:u})})]})},q={id:"123",name:"Wizeline",avatarUrl:"https://media.glassdoor.com/sqll/868055/wizeline-squarelogo-1473976610815.png"};function M(){return(M=Object(D.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){setTimeout((function(){return"wizeline"===t.username&&"Rocks!"===t.password?e(q):r(new Error("Username or password invalid"))}),500)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){var e=function(){var e=Object(c.useContext)(f);if(!e)throw new Error('Can\'t use "useUserContext" without an UserProvider!');return e}(),t=e.jwt,r=e.setJWT,n=Object(c.useState)({loading:!1,error:!1}),a=Object(o.a)(n,2),s=a[0],i=a[1],l=Object(c.useCallback)((function(e){var t=e.username,c=e.password;i({loading:!0,error:!1}),function(e){return M.apply(this,arguments)}({username:t,password:c}).then((function(e){window.sessionStorage.setItem("jwt",e),i({loading:!1,error:!1}),r(e)})).catch((function(e){window.sessionStorage.removeItem("jwt"),i({loading:!1,error:!0}),console.error(e)}))}),[r]),d=Object(c.useCallback)((function(){window.sessionStorage.removeItem("jwt"),r(null)}),[r]);return{isLogged:Boolean(t),isLoginLoading:s.loading,hasLoginError:s.error,login:l,logout:d}}var H=function(e){var t=e.onLogin,r=Object(l.g)(),n=Object(c.useState)(""),a=Object(o.a)(n,2),s=a[0],i=a[1],d=Object(c.useState)(""),u=Object(o.a)(d,2),j=u[0],b=u[1],x=T(),m=x.isLoginLoading,g=x.hasLoginError,p=x.login,O=x.isLogged;Object(c.useEffect)((function(){O&&r.push("/")}),[O,r,t]);return Object(h.jsxs)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:[m&&Object(h.jsx)("strong",{className:"text-red-500 text-sm",children:"Checking credentials..."}),!m&&Object(h.jsx)("section",{children:Object(h.jsx)("div",{className:"flex items-center h-screen w-full bg-teal-lighter",children:Object(h.jsxs)("div",{className:"w-full bg-white rounded shadow-lg p-8 m-4 md:max-w-sm md:mx-auto",children:[Object(h.jsx)("h1",{className:"block w-full text-center text-red-500 mb-6",children:g&&Object(h.jsx)("strong",{children:"Credentials are invalid"})}),Object(h.jsxs)("form",{className:"mb-4 md:flex md:flex-wrap md:justify-between",onSubmit:function(e){e.preventDefault(),p({username:s,password:j})},method:"post",children:[Object(h.jsxs)("div",{className:"flex flex-col mb-4 md:w-full",children:[Object(h.jsx)("label",{className:"mb-2 uppercase font-bold text-lg text-grey-darkest",htmlFor:"username",children:"Email"}),Object(h.jsx)("input",{className:"border py-2 px-3 text-grey-darkest",type:"text",name:"username",onChange:function(e){return i(e.target.value)},id:"username"})]}),Object(h.jsxs)("div",{className:"flex flex-col mb-6 md:w-full",children:[Object(h.jsx)("label",{className:"mb-2 uppercase font-bold text-lg text-grey-darkest",htmlFor:"password",children:"Password"}),Object(h.jsx)("input",{className:"border py-2 px-3 text-grey-darkest",type:"password",name:"password",onChange:function(e){return b(e.target.value)},id:"password"})]}),Object(h.jsxs)("div",{className:"grid grid-cols-2 mx-auto gap-.5",children:[Object(h.jsx)("div",{children:Object(h.jsx)("button",{className:"block shadow-lg bg-green-400 hover:bg-green-500 text-white uppercase text-lg px-8 py-2 rounded",type:"submit",children:"Login"})}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{className:"block shadow-lg bg-red-400 hover:bg-red-500 text-white uppercase text-lg px-10 py-2 rounded",type:"button",onClick:function(e){e.stopPropagation(),r.goBack()},children:"Cancel"})})]})]})]})})})]})},X=function(e){var t=e.video,r=g(),c=r.state,n=r.dispatch,a=c.favouriteVideos;return Object(h.jsx)("button",{className:"block shadow-lg md:text-xs focus:outline-none bg-green-400 hover:bg-green-500 dark:bg-red-400 dark:hover:bg-red-500 text-white uppercase lg:text-lg mx-auto px-4 py-1 rounded",type:"button",onClick:function(){var e=a.includes(t);if(n({type:"@set/favourites_videos",payload:t}),e){var r=a.filter((function(e){return e.id.videoId!==t.id.videoId}));n({type:"@set/remove_favourites_videos",payload:r})}},children:a.find((function(e){return e.id.videoId===t.id.videoId}))?"Remove from favorites":"Add to Favorites"})},G=function(e){var t=e.video,r=e.isLogged;if(!t)return Object(h.jsx)("div",{children:"Loading..."});var c=t.id,n=t.snippet,a="https://www.youtube.com/embed/".concat(c.videoId);return Object(h.jsxs)("div",{className:"col-start-1 col-end-6 mx-0.5 mt-0.5",children:[Object(h.jsx)("div",{className:"aspect-w-16 aspect-h-9",children:Object(h.jsx)("iframe",{src:a,title:n.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"})}),Object(h.jsxs)("div",{className:"grid sm:grid-cols-1 md:grid-flow-col md:grid-cols-3 gap-4",children:[Object(h.jsx)("div",{className:"md:col-span-2",children:Object(h.jsx)("h4",{className:"ml-2 m-4 text-lg",children:n.title})}),Object(h.jsx)("div",{className:"md:mt-2 sm:px-8 sm:mx-auto",children:r&&Object(h.jsx)(X,{video:t})})]}),Object(h.jsx)("p",{className:"ml-2 m-4 text-sm font-hairline text-gray-500",children:n.description})]})};var K=function(e){var t=e.toggleDrawer,r=e.isOpen,n=e.isFavourite,a=Object(c.useRef)(null),s=T().isLogged,i=g(),o=i.state,l=i.dispatch;Q(o.searchQuery);var d=o.videos,u=o.currentVideo,j=JSON.parse(localStorage.getItem("favouriteVideos")),b=u;return u||(b=JSON.parse(localStorage.getItem("currentVideo"))),Object(h.jsxs)("section",{ref:a,children:[Object(h.jsx)(P,{toggleDrawer:t,isOpen:r,placeholder:"Search...",mode:"light"}),Object(h.jsxs)("section",{className:"grid grid-cols-7",children:[Object(h.jsx)(G,{video:b,isLogged:s}),Object(h.jsx)(A,{onSelectedVideo:function(e){localStorage.setItem("currentVideo",JSON.stringify(e)),l({type:"@set/current_video",payload:e})},videos:n?j:d,relatedCard:b})]})]})};r(86);var Y=function(){return Object(h.jsxs)("section",{className:"not-found",children:[Object(h.jsx)(i.b,{to:"/",className:"home-link",children:"home"}),Object(h.jsx)("img",{src:"404.gif",alt:"page not found"})]})};var Z=function(){return Object(h.jsxs)("section",{children:[Object(h.jsxs)("pre",{children:["welcome, voyager...",Object(h.jsx)(i.b,{to:"/",children:" \u2190 go back"})]}),Object(h.jsx)("iframe",{width:"800",height:"450",allowFullScreen:!0,frameBorder:"0",title:"rick roll",src:"https://www.youtube.com/embed/dQw4w9WgXcQ?controls=0&autoplay=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"})]})};var $=function(e){var t=e.toggleDrawer,r=e.isOpen,n=Object(c.useRef)(null),a=g(),s=a.dispatch,i=a.state.favouriteVideos;return Object(h.jsxs)("section",{ref:n,children:[Object(h.jsx)(P,{toggleDrawer:t,isOpen:r,placeholder:"Search...",mode:"light"}),Object(h.jsx)("section",{children:Object(h.jsx)(A,{onSelectedVideo:function(e){s({type:"@set/current_video",payload:e})},videos:i})})]})},ee=r(39);var te=function(e){var t=e.children,r=Object(ee.a)(e,["children"]),n=function(){var e=Object(c.useContext)(k);if(!e)throw new Error('Can\'t use "useAuth" without an AuthProvider!');return e}().authenticated;return Object(h.jsx)(l.b,Object(j.a)(Object(j.a)({},r),{},{render:function(){return n?t:Object(h.jsx)(l.a,{to:"/"})}}))};var re=function(e){var t=e.children;return Object(h.jsx)("main",{className:"bg-white dark:bg-gray-800 h-full dark:text-white",children:t})};r(87);var ce=function(){var e=Object(l.h)(),t=e.state&&e.state.background,r=Object(l.g)(),n=Object(c.useState)(!1),a=Object(o.a)(n,2),s=a[0],i=a[1],u=function(){i((function(e){return!e}))};return Object(h.jsx)(p,{children:Object(h.jsx)(v,{children:Object(h.jsxs)(S,{children:[Object(h.jsx)(d.a,{open:s,onClose:u,direction:"left",children:Object(h.jsxs)("div",{className:"grid grid-rows-2 grid-flow-col gap-4 divide-y divide-light-gray-400",children:[Object(h.jsx)("div",{className:"pt-4 pl-2",children:Object(h.jsx)("button",{type:"button",onClick:function(){i((function(e){return!e})),r.push("/")},children:"Home"})}),Object(h.jsx)("div",{className:"pt-0 pl-2",children:Object(h.jsx)("button",{type:"button",onClick:function(){i((function(e){return!e})),r.push("/favourites")},children:"Favourites"})})]})}),Object(h.jsxs)(re,{children:[Object(h.jsxs)(l.d,{location:t||e,children:[Object(h.jsx)(l.b,{path:"/video",render:function(e){var t=e.match;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(l.b,{exact:!0,path:"".concat(t.url,"/"),children:Object(h.jsx)(U,{toggleDrawer:u,isOpen:s})}),Object(h.jsx)(l.b,{path:"".concat(t.url,"/:id"),children:Object(h.jsx)(K,{toggleDrawer:u,isOpen:s})})]})}}),Object(h.jsx)(l.b,{exact:!0,path:"/",children:Object(h.jsx)(U,{toggleDrawer:u,isOpen:s})}),Object(h.jsx)(l.b,{path:"/favourites",render:function(e){var t=e.match;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(l.b,{exact:!0,path:"".concat(t.url,"/"),children:Object(h.jsx)($,{toggleDrawer:u,isOpen:s})}),Object(h.jsx)(l.b,{path:"".concat(t.url,"/:id"),children:Object(h.jsx)(K,{toggleDrawer:u,isOpen:s,isFavourite:"true"})})]})}}),Object(h.jsx)(l.b,{path:"/login",component:H}),Object(h.jsx)(te,{exact:!0,path:"/secret",children:Object(h.jsx)(Z,{})}),Object(h.jsx)(l.b,{path:"*",children:Object(h.jsx)(Y,{})})]}),t&&Object(h.jsx)(l.b,{path:"/login",component:H})]})]})})})};r(88);s.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(i.a,{children:Object(h.jsx)(ce,{})})}),document.getElementById("root",{className:"h-full"}))}},[[89,1,2]]]);
//# sourceMappingURL=main.adb54524.chunk.js.map